import{S as us,i as fs,s as vs,H as Oe,y as ds,z as ms,A as Cs,O as ys,T as os,g as Ds,d as As,B as _s,R as as,k as r,q as a,a as v,_ as ns,l as i,m as p,r as n,h as s,c as d,$ as rs,n as D,b as o,C as t,D as ks}from"./index.rDtGiAC-.js";import{M as Es}from"./mdsvex.OWYYiW4z.js";function bs(B){let c,f,C,b,u,m,I,ue,O,fe,ve,de,me,F,q,Ce,J,A,ye,x,De,Ae,W,H,_e,K,P,ke,V,$,Ee,Y,j,be,Z,_,qe,w,xe,Pe,g,S,we,ee,k,Se,U,Te,he,se,X,ps=`<pre class="shiki poimandres" style="background-color: #1b1e28" tabindex="0"><code><span class="line"><span style="color: #A6ACCD">    </span><span style="color: #5DE4C7">networks</span><span style="color: #A6ACCD">:</span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Il faut que votre service soit dans le même network docker</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #ADD7FF">traefik</span></span>
<span class="line"><span style="color: #A6ACCD">    </span><span style="color: #5DE4C7">labels</span><span style="color: #A6ACCD">:</span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Activé Traefik pour ce service car celui-ci ne l&#39;est pas par default</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #A6ACCD">&quot;</span><span style="color: #5DE4C7">traefik.enable=true</span><span style="color: #A6ACCD">&quot;</span></span>
<span class="line"><span style="color: #A6ACCD">      </span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Dans les labels suivants, il faut remplacer la mention &#39;nomduservice&#39; par le nom de votre service</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Remplacer &#39;XXXX&#39; par le sous domaine de votre choix, souvent, cela sera le nom de votre service</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #A6ACCD">&quot;</span><span style="color: #5DE4C7">traefik.http.routers.nomduservice.rule=Host(&#96;XXXX.exemple.fr&#96;)</span><span style="color: #A6ACCD">&quot;</span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Activé l&#39;HTTPS sur la page</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #A6ACCD">&quot;</span><span style="color: #5DE4C7">traefik.http.routers.nomduservice.entrypoints=websecure</span><span style="color: #A6ACCD">&quot;</span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Le nom du certificat paramétré dans Traefik</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #A6ACCD">&quot;</span><span style="color: #5DE4C7">traefik.http.routers.nomduservice.tls.certresolver=myresolver</span><span style="color: #A6ACCD">&quot;</span></span>
<span class="line"><span style="color: #A6ACCD">      </span><span style="color: #767C9DB0; font-style: italic"># Le port du service dans le proxy</span></span>
<span class="line"><span style="color: #A6ACCD">      - </span><span style="color: #A6ACCD">&quot;</span><span style="color: #5DE4C7">traefik.http.services.nomduservice.loadbalancer.server.port=8080</span><span style="color: #A6ACCD">&quot;</span></span></code></pre>`,M,L,Be,te,z,cs=`<pre class="shiki poimandres" style="background-color: #1b1e28" tabindex="0"><code><span class="line"><span style="color: #5DE4C7">networks</span><span style="color: #A6ACCD">:</span></span>
<span class="line"><span style="color: #A6ACCD">  </span><span style="color: #767C9DB0; font-style: italic"># Appel du network Docker</span></span>
<span class="line"><span style="color: #A6ACCD">  </span><span style="color: #5DE4C7">traefik</span><span style="color: #A6ACCD">:</span></span>
<span class="line"><span style="color: #A6ACCD">    </span><span style="color: #5DE4C7">external</span><span style="color: #A6ACCD">: </span><span style="color: #5DE4C7">true</span></span></code></pre>`,G,T,Ie,le,N,He,oe,R,$e,ae,h,je,ne,E,Le,Q,Ne,Re;return{c(){c=r("blockquote"),f=r("p"),C=r("strong"),b=a("DISCLAIMER :"),u=a(`
L’ensemble des manipulations suivantes ont été réalisé sur `),m=r("strong"),I=a("Ubuntu Server 22.04 LTS"),ue=a(" avec "),O=r("strong"),fe=a("Traefik v2.11"),ve=a("."),de=r("br"),me=a(`
Si vous n’utilisez pas cette distribution Unix ou que vous utilisez un autre système d’exploitation certaines choses peuvent
être différentes et je ne peux pas garantir que cela fonctionnera sur votre machine / serveur.`),F=v(),q=r("h2"),Ce=a("Prérequis"),J=v(),A=r("p"),ye=a("Cet article est la suite directe de "),x=r("a"),De=a("celui-ci"),Ae=a("."),W=v(),H=r("p"),_e=a("Je vous invite vivement à avoir suivi la première partie avant de continuer."),K=v(),P=r("h2"),ke=a("Dockeriser de vos services Web"),V=v(),$=r("p"),Ee=a("Dans cet article, la demonstration sera faite avec Docker comme solution de déploiement de service web."),Y=v(),j=r("p"),be=a("Qu’est-ce que Docker ? C’est un outil qui permet de déployer des applications dans des conteneurs. Un conteneur est un environnement isolé qui contient tout ce dont une application a besoin pour fonctionner, y compris le code, les bibliothèques et les dépendances."),Z=v(),_=r("p"),qe=a("En apprendre plus sur Docker "),w=r("a"),xe=a("ici"),Pe=a("."),g=v(),S=r("h2"),we=a("Modifications à apporter"),ee=v(),k=r("p"),Se=a("Dans le fichier "),U=r("code"),Te=a("dockercompose.yml"),he=a(" de votre service, dans la section de votre service, ajouter les mentions suivante :"),se=v(),X=new ns(!1),M=v(),L=r("p"),Be=a("Il faut aussi penser à ajouter la mention du réseau Traefik dans le fichier."),te=v(),z=new ns(!1),G=v(),T=r("h2"),Ie=a("Configuration DNS"),le=v(),N=r("p"),He=a("Pour accéder à votre service sur le sous domaine de votre choix, il faut que celui-ci soit résolu par un serveur DNS."),oe=v(),R=r("p"),$e=a("Pour cela, il faut ajouter une entrée DNS de type A pour le sous domaine de votre choix, qui pointe vers l’adresse IP de votre serveur."),ae=v(),h=r("h2"),je=a("Comment déployer"),ne=v(),E=r("p"),Le=a("Il vous suffit maintenant de faire "),Q=r("code"),Ne=a("docker compose up -d"),Re=a(", votre service sera disponible sur le sous domaine de votre choix."),this.h()},l(e){c=i(e,"BLOCKQUOTE",{});var l=p(c);f=i(l,"P",{});var y=p(f);C=i(y,"STRONG",{});var Ue=p(C);b=n(Ue,"DISCLAIMER :"),Ue.forEach(s),u=n(y,`
L’ensemble des manipulations suivantes ont été réalisé sur `),m=i(y,"STRONG",{});var Xe=p(m);I=n(Xe,"Ubuntu Server 22.04 LTS"),Xe.forEach(s),ue=n(y," avec "),O=i(y,"STRONG",{});var Me=p(O);fe=n(Me,"Traefik v2.11"),Me.forEach(s),ve=n(y,"."),de=i(y,"BR",{}),me=n(y,`
Si vous n’utilisez pas cette distribution Unix ou que vous utilisez un autre système d’exploitation certaines choses peuvent
être différentes et je ne peux pas garantir que cela fonctionnera sur votre machine / serveur.`),y.forEach(s),l.forEach(s),F=d(e),q=i(e,"H2",{id:!0});var ze=p(q);Ce=n(ze,"Prérequis"),ze.forEach(s),J=d(e),A=i(e,"P",{});var re=p(A);ye=n(re,"Cet article est la suite directe de "),x=i(re,"A",{href:!0,rel:!0});var Ge=p(x);De=n(Ge,"celui-ci"),Ge.forEach(s),Ae=n(re,"."),re.forEach(s),W=d(e),H=i(e,"P",{});var Qe=p(H);_e=n(Qe,"Je vous invite vivement à avoir suivi la première partie avant de continuer."),Qe.forEach(s),K=d(e),P=i(e,"H2",{id:!0});var Fe=p(P);ke=n(Fe,"Dockeriser de vos services Web"),Fe.forEach(s),V=d(e),$=i(e,"P",{});var Je=p($);Ee=n(Je,"Dans cet article, la demonstration sera faite avec Docker comme solution de déploiement de service web."),Je.forEach(s),Y=d(e),j=i(e,"P",{});var We=p(j);be=n(We,"Qu’est-ce que Docker ? C’est un outil qui permet de déployer des applications dans des conteneurs. Un conteneur est un environnement isolé qui contient tout ce dont une application a besoin pour fonctionner, y compris le code, les bibliothèques et les dépendances."),We.forEach(s),Z=d(e),_=i(e,"P",{});var ie=p(_);qe=n(ie,"En apprendre plus sur Docker "),w=i(ie,"A",{href:!0,rel:!0});var Ke=p(w);xe=n(Ke,"ici"),Ke.forEach(s),Pe=n(ie,"."),ie.forEach(s),g=d(e),S=i(e,"H2",{id:!0});var Ve=p(S);we=n(Ve,"Modifications à apporter"),Ve.forEach(s),ee=d(e),k=i(e,"P",{});var pe=p(k);Se=n(pe,"Dans le fichier "),U=i(pe,"CODE",{});var Ye=p(U);Te=n(Ye,"dockercompose.yml"),Ye.forEach(s),he=n(pe," de votre service, dans la section de votre service, ajouter les mentions suivante :"),pe.forEach(s),se=d(e),X=rs(e,!1),M=d(e),L=i(e,"P",{});var Ze=p(L);Be=n(Ze,"Il faut aussi penser à ajouter la mention du réseau Traefik dans le fichier."),Ze.forEach(s),te=d(e),z=rs(e,!1),G=d(e),T=i(e,"H2",{id:!0});var ge=p(T);Ie=n(ge,"Configuration DNS"),ge.forEach(s),le=d(e),N=i(e,"P",{});var es=p(N);He=n(es,"Pour accéder à votre service sur le sous domaine de votre choix, il faut que celui-ci soit résolu par un serveur DNS."),es.forEach(s),oe=d(e),R=i(e,"P",{});var ss=p(R);$e=n(ss,"Pour cela, il faut ajouter une entrée DNS de type A pour le sous domaine de votre choix, qui pointe vers l’adresse IP de votre serveur."),ss.forEach(s),ae=d(e),h=i(e,"H2",{id:!0});var ts=p(h);je=n(ts,"Comment déployer"),ts.forEach(s),ne=d(e),E=i(e,"P",{});var ce=p(E);Le=n(ce,"Il vous suffit maintenant de faire "),Q=i(ce,"CODE",{});var ls=p(Q);Ne=n(ls,"docker compose up -d"),ls.forEach(s),Re=n(ce,", votre service sera disponible sur le sous domaine de votre choix."),ce.forEach(s),this.h()},h(){D(q,"id","prérequis"),D(x,"href","https://vadim-soude.github.io/Portfolio/traefik-docker"),D(x,"rel","nofollow"),D(P,"id","dockeriser-de-vos-services-web"),D(w,"href","https://www.docker.com"),D(w,"rel","nofollow"),D(S,"id","modifications-à-apporter"),X.a=M,z.a=G,D(T,"id","configuration-dns"),D(h,"id","comment-déployer")},m(e,l){o(e,c,l),t(c,f),t(f,C),t(C,b),t(f,u),t(f,m),t(m,I),t(f,ue),t(f,O),t(O,fe),t(f,ve),t(f,de),t(f,me),o(e,F,l),o(e,q,l),t(q,Ce),o(e,J,l),o(e,A,l),t(A,ye),t(A,x),t(x,De),t(A,Ae),o(e,W,l),o(e,H,l),t(H,_e),o(e,K,l),o(e,P,l),t(P,ke),o(e,V,l),o(e,$,l),t($,Ee),o(e,Y,l),o(e,j,l),t(j,be),o(e,Z,l),o(e,_,l),t(_,qe),t(_,w),t(w,xe),t(_,Pe),o(e,g,l),o(e,S,l),t(S,we),o(e,ee,l),o(e,k,l),t(k,Se),t(k,U),t(U,Te),t(k,he),o(e,se,l),X.m(ps,e,l),o(e,M,l),o(e,L,l),t(L,Be),o(e,te,l),z.m(cs,e,l),o(e,G,l),o(e,T,l),t(T,Ie),o(e,le,l),o(e,N,l),t(N,He),o(e,oe,l),o(e,R,l),t(R,$e),o(e,ae,l),o(e,h,l),t(h,je),o(e,ne,l),o(e,E,l),t(E,Le),t(E,Q),t(Q,Ne),t(E,Re)},p:ks,d(e){e&&s(c),e&&s(F),e&&s(q),e&&s(J),e&&s(A),e&&s(W),e&&s(H),e&&s(K),e&&s(P),e&&s(V),e&&s($),e&&s(Y),e&&s(j),e&&s(Z),e&&s(_),e&&s(g),e&&s(S),e&&s(ee),e&&s(k),e&&s(se),e&&X.d(),e&&s(M),e&&s(L),e&&s(te),e&&z.d(),e&&s(G),e&&s(T),e&&s(le),e&&s(N),e&&s(oe),e&&s(R),e&&s(ae),e&&s(h),e&&s(ne),e&&s(E)}}}function qs(B){let c,f;const C=[B[0],is];let b={$$slots:{default:[bs]},$$scope:{ctx:B}};for(let u=0;u<C.length;u+=1)b=Oe(b,C[u]);return c=new Es({props:b}),{c(){ds(c.$$.fragment)},l(u){ms(c.$$.fragment,u)},m(u,m){Cs(c,u,m),f=!0},p(u,[m]){const I=m&1?ys(C,[m&1&&os(u[0]),m&0&&os(is)]):{};m&2&&(I.$$scope={dirty:m,ctx:u}),c.$set(I)},i(u){f||(Ds(c.$$.fragment,u),f=!0)},o(u){As(c.$$.fragment,u),f=!1},d(u){_s(c,u)}}}const is={title:"Deploiement d'un service web avec Traefik.",description:"Une explication de comment déployer des services web, dans des sous-domaines, avec Traefik.",date:"2024-2-10",categories:["Docker","Réseau","Proxy"],published:!0};function xs(B,c,f){return B.$$set=C=>{f(0,c=Oe(Oe({},c),as(C)))},c=as(c),[c]}class Ss extends us{constructor(c){super(),fs(this,c,xs,qs,vs,{})}}export{Ss as default,is as metadata};
